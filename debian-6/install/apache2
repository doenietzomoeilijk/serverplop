#!/bin/bash

# Exit the script when a command returns a non true value.
set -e
# Prevent using unset variables.
set -u

if [[ $EUID -ne 0 ]]; then
  echo "$0 must be run as root"
  exit 1
fi

packages=('apache2');

# Install this module if Perl is available.
if which perl; then
  packages=("${packages[@]}" 'libapache2-mod-perl2')
fi

# Install this module if PHP is available.
if which php; then
  packages=("${packages[@]}" 'libapache2-mod-php5')
fi

apt-get update -y
apt-get install -y ${packages[@]}
