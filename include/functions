#!/bin/bash

function log {
  echo -e $SERVERPLOP"$@"
}

function loginfo {
  echo -e $INFO"$@"
}

function logerror {
  echo -e $ERROR"$@"
}

function spinner {
  while [ -d /proc/$1 ]; do
    echo -en $GREEN'/\x08'$NOCLR;
    sleep .1

    echo -en $GREEN'-\x08'$NOCLR;
    sleep .1

    echo -en $GREEN'\x08'$NOCLR;
    sleep .1

    echo -en $GREEN'|\x08'$NOCLR;
    sleep .1

    tput sgr0;
  done;
}

function run {
  # Run the process in the background and tie it to a spinner.
  $@ >/dev/null 2>&1 &

  if [[ "$DISTRIBUTOR" == "Debian" && "$1" == "sudo" ]]; then
    # We cannot use the spinner on Debian when combined with sudo.
    # The spinner will simply eat up the password input.
    sleep .05
  else
    spinner $!
  fi
}

# Currently dead code. Had need for this when trying to add a new installation.
# I gave up on that installation, but the function is probably still useful.
function findlib {
  if ls $DISTRIBUTOR"/"$CODENAME"/lib/"$1 >/dev/null 2>&1; then
    ls $DISTRIBUTOR"/"$CODENAME"/lib/"$1
  else
    if ls $DISTRIBUTOR"/lib/"$1 >/dev/null 2>&1; then
      ls $DISTRIBUTOR"/lib/"$1
    else
      ls "lib/"$1
    fi
  fi
}
